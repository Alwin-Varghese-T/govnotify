<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Pages / Register Notify</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="static/img/bird.png" rel="icon">
  <link href="static/img/bird.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="static/css/style.css" rel="stylesheet">

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  



</head>

<body>

  <main>
    <div class="container">

      <section class="section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center">

              <div class="d-flex justify-content-center py-4">
                <a href="index.html" class="logo d-flex align-items-center w-auto">
                  <img src="static/img/bird.png" alt="">
                  <span class="d-none d-lg-block">Notify</span>
                </a>
              </div><!-- End Logo -->

              <div class="card mb-3">

                <div class="card-body">

                  <div class="pt-4 pb-2">
                    <h5 class="card-title text-center pb-0 fs-4">Create an Account</h5>
                    <p class="text-center small">Enter your personal details to create account</p>
                  </div>

                  <form action="{{ url_for('register') }}" method="post" class="row g-3 needs-validation" >
                    <div class="col-12">
                      <label for="yourname" class="form-label">Your Name</label>
                      <input type="text" name="username" class="form-control" id="yourname" required>
                      <div class="invalid-feedback">Please, enter your name!</div>
                    </div>


                    
                    
                    <div class="col-12">
                      <label for="email" class="form-label">Your Email</label>
                      <input type="email" name="email" class="form-control" id="email" required>


                      
 <!--  OTTP Verification 
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

 <script>

  function generateOTP(button) {
    // Retrieve the email input value
    var email = document.getElementById("email").value;

    // Validate the email field
    if (!email) {
      // Display an error message or handle the error as needed
      return;
    }

    // Send AJAX request to Flask backend to generate OTP
    axios.post('/generate_otp', {
      email: email // Pass the email value in the request payload
    })
    .then(function (response) {
      // Handle the response from the backend
      var otp = response.data.otp; // Assuming the response contains the generated OTP
      // Perform any necessary actions with the OTP (e.g., display it to the user)
      console.log("OTP generated:", otp);

      // Show the verification interface
      document.getElementById("ifVerify").style.display = "block";
    })
    .catch(function (error) {
      // Handle any errors that occurred during the request
      console.error(error);
    });
  }

  function verifyOTP(button) {
    // Retrieve the OTP input value
    var otpInput = document.getElementById("otpInput").value;
    var email = document.getElementById("email").value;

    // Validate the OTP field
    if (!otpInput) {
      // Display an error message or handle the error as needed
      alert("no otp entered");
      return;
    } else {

    //Check if OTPs match
    if (otpInput == otp) {
        submitBtn.disabled = false;
        alert("OTP verified!");
    }
    else {
      submitBtn.disabled = true;
        alert("Invalid OTP. Please try again.");
    }
    }

    // Send AJAX request to Flask backend to verify the OTP
    axios.post('/verify_otp', {
      otp: otpInput, // Pass the OTP value in the request payload
      email: email
    })
    .then(function (response) {
      // Handle the response from the backend
      var isOTPValid = response.data.isValid; // Assuming the response indicates if the OTP is valid or not
      // Perform any necessary actions based on the verification result
      if (isOTPValid) {
        alert("verified");
        console.log("OTP is valid!");
        // Proceed with further actions
      } else {
        alert("not verified");
        console.log("OTP is invalid!");
        // Handle the invalid OTP case
      }
    })
    .catch(function (error) {
      // Handle any errors that occurred during the request
      console.error(error);
    });
  }

</script>



                      
                      
                      <input type="button" value="verify" onclick="generateOTP(this);">

                        <div id="ifVerify" style="display: none;">
                          <div class="col-12">
                            <label for="otp">Enter OTP:</label> 
                            <input type="text" id="otpInput" name="otp">
                            <input type="button" value="submit" onclick="verifyOTP(this);">
                          </div>
                        </div>
<!-- End of OTP  -->

                      <input type="button" value="verify" onclick="generateOTP(this);">

<div id="ifVerify" style="display: none;">
  <div class="col-12">
    <label for="otpInput">Enter OTP:</label>
    <input type="text" id="otpInput" name="otpInput">
    <input type="button" value="submit" onclick="verifyOTP(this);">
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
  var otp;  // Global variable to store the generated OTP

  function generateOTP(button) {
    // Retrieve the email input value
    var email = document.getElementById("email").value;

    // Validate the email field
    if (!email) {
      // Display an error message or handle the error as needed
      return;
    }

    // Send AJAX request to Flask backend to generate OTP
    axios.post('/generate_otp', {
      email: email // Pass the email value in the request payload
    })
    .then(function (response) {
      // Handle the response from the backend
      otp = response.data.otp; // Assuming the response contains the generated OTP
      // Perform any necessary actions with the OTP (e.g., display it to the user)
      console.log("OTP generated:", otp);

      // Show the verification interface
      document.getElementById("ifVerify").style.display = "block";
    })
    .catch(function (error) {
      // Handle any errors that occurred during the request
      console.error(error);
    });
  }

function verifyOTP(button) {
  // Retrieve the OTP input value
  var otpInput = document.getElementById("otpInput").value.trim();

  // Validate the OTP field
  if (!otpInput) {
    // Display an error message or handle the error as needed
    alert("No OTP entered");
    return;
  }

  // Check if OTPs match
  if (otpInput === otp.toString()) {
    submitBtn.disabled = false;
    swal("Email Verification", "Success", "success");
  } else {
    submitBtn.disabled = true;
    swal("Email Verification", "Failed", "error");
    return; // Exit the function if OTP is invalid
  }

  // Send AJAX request to Flask backend to verify the OTP
  axios.post('/verify_otp', {
    otp: otpInput // Pass the OTP value in the request payload
  })
  .then(function (response) {
    // Handle the response from the backend
    var isOTPValid = response.data.isValid; // Assuming the response indicates if the OTP is valid or not
    // Perform any necessary actions based on the verification result
    if (isOTPValid) {
      console.log("OTP is valid!");
      // Proceed with further actions
    } else {
      console.log("OTP is invalid!");
      // Handle the invalid OTP case
    }
  })
  .catch(function (error) {
    // Handle any errors that occurred during the request
    console.error(error);
  });
}
</script>


                      
                      <div class="invalid-feedback">Please enter a valid Email adddress!</div>
                    </div>

                    <div class="col-12">
                      <label for="password" class="form-label">Password</label>
                        <input type="password" name="password" class="form-control" id="password" required>
                        <div class="invalid-feedback">Please type password.</div>
                    </div>
                    <div class="col-12">
                      <label for="reTypeassword" class="form-label">Re-Type Password</label>
                      <input type="password" name="reTypePassword" class="form-control" id="reTypePassword" required>
                      <div class="invalid-feedback">Please enter correct password!</div>
                    </div>
                    <div class="col-12">
                      <div class="gender">Gender : &nbsp;&nbsp;
                      <input type="radio" name="gender"  id="male" value="male" required>male &nbsp;&nbsp;
                      <input type="radio" name="gender"  id="female" value="female" required>female &nbsp;&nbsp;
                      <input type="radio" name="gender"  id="trans" value="transgender" required>trans
                      <div class="invalid-feedback">Please select any</div>
                      </div>
                    </div>
                    <div class="col-12"  id="mycontainer">
                      Age : &nbsp;
            <select id="AgeDropdownId" name="AgeDropdown" class="AgeDropdown" required>
                <option value="age below 5">0 - 5</option>
              <option value="age below 15">6 - 15</option>
              <option value="age below 30">15 - 30</option>
              <option value="age below 50">31 - 50</option>
			  <option value="age under 65">51 - 65</option>
              <option value="65 and above">65 and above</option>
            </select>
                      <div class="invalid-feedback">Please select</div>
                    </div>
                     <div class="col-12">
                      Marital Status : 
                          <select id="marriage" name="marriage" class="marriage" onchange="yesnoCheck(this);" required>
                          <option value="N/A"></option>
                            <option value="Married">Married</option>
                            <option value="Unmarried">Unmarried</option>
                            <option value="Widow">Widow</option>
                             <option value="Divorced">Divorced</option>
                             <option value="Seperated">Seperated</option>
                            
                          </select><br>
                       <div class="invalid-feedback">Please select</div><br>
                  </div>
                     <div class="col-12">
                      <div class="seniority">Are you a senior citizen : &nbsp;&nbsp;
                      <input type="radio" name="seniority"  id="yes" value="senior citizen" required>Yes &nbsp;&nbsp;
                      <input type="radio" name="seniority"  id="no" value="no" required>No
                      <div class="invalid-feedback">Please select any</div>
                      </div>
                    </div>
                        <div class="col-12">
                      You belong to : &nbsp;
            <select id="belong" name="belong" class="belong" required>
                <option value="general">General</option>
              <option value="sc">SC</option>
			  <option value="st">ST</option>
              <option value="obc">OBC</option>
			  <option value="oec">OEC</option>
            </select>
                      <div class="invalid-feedback">Please select</div>
                    </div>
                    <div class="col-12">
                      <div class="differentlyabled">Are you differently abled : &nbsp;&nbsp;
                      <input type="radio" name="differentlyabled"  id="yes" value="differently abled" required>Yes &nbsp;&nbsp;
                      <input type="radio" name="differentlyabled"  id="no" value="no" required>No
                      <div class="invalid-feedback">Please select any</div>
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="bpl">Do you belong to BPL community : &nbsp;&nbsp;
                      <input type="radio" name="bpl"  id="yes" value="bpl" required>Yes &nbsp;&nbsp;
                      <input type="radio" name="bpl"  id="no" value="no" required>No
                      <div class="invalid-feedback">Please select any</div>
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="income">Your family income : &nbsp;&nbsp;
                      <input type="radio" name="income"  id="1lakh" value="financial assistance" required>less than 1 lakh &nbsp;&nbsp;
                      <input type="radio" name="income"  id="2.5lakh" value="2.5lakh" required>1 - 2.5 lakh
                        &nbsp;&nbsp;
                      <input type="radio" name="income"  id="5lakh" value="5lakh" required>2.5 - 5 lakh
                        &nbsp;&nbsp;
                      <input type="radio" name="income"  id="above5" value="above5" required>above 5
                      <div class="invalid-feedback">Please select any</div>
                      </div>
                    </div>
                      <div class="col-12">
                      select category : 
                          <select id="category" name="category" class="category" onchange="categoryCheck(this);"  required>
                          <option value="N/A"></option>
                            <option value="agriculture">AGRICULTURE</option>
                            <option value="education">EDUCATION</option>
                            <option value="health">HEALTH</option>
                            <option value="social welfare">SOCIAL WELFARE</option>                            
                          </select><br>
                       <div class="invalid-feedback">Please select</div><br>
                       <div id="ifagriculture" class="category-block" style="display: none;">
    select : <input class="single-checkbox"type="checkbox" name="checkboxes"  id="farmer" value="farmer">FARMER &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="farmer-group" value="farmer group">FARMER GROUP &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="financial-assistance" value="financial assistance">FINANCIAL ASSISTANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="crop-insurance" value="crop insurance">CROP INSURANCE &nbsp;
			 <input class="single-checkbox"type="checkbox" name="checkboxes"  id="farming" value="farming">FARMING &nbsp;
			 <input class="single-checkbox"type="checkbox" name="checkboxes"  id="trader" value="trader">TRADER &nbsp;
			 <input class="single-checkbox"type="checkbox" name="checkboxes"  id="market" value="market">MARKET &nbsp;			   
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="fruits" value="fruits">FRUITS &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="vegetables" value="vegetables">VEGETABLES &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="compensation" value="compensation">COMPENSATION &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="damage" value="damage">DAMAGE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="farm" value="farm">FARM &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="soil" value="soil">SOIL &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="land" value="land">LAND &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="landholder" value="landholder">LANDHOLDER &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="cultivable" value="cultivable">CULTIVABLE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="fertilizer" value="fertilizer">FERTILIZER &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="pesticides" value="pesticides">PESTICIDES &nbsp;
		     <input class="single-checkbox"type="checkbox" name="checkboxes"  id="subsidy" value="subsidy">SUBSIDY &nbsp;
    		 <input class="single-checkbox"type="checkbox" name="checkboxes"  id="machinery" value="machinery">MACHINERY &nbsp;
		     <input class="single-checkbox"type="checkbox" name="checkboxes"  id="fishery" value="fishery">FISHERY &nbsp;				   
                         
</div>
                         <div id="ifeducation" class="category-block" style="display: none;">
    select : <input class="single-checkbox"type="checkbox" name="checkboxes"  id="college" value="college">COLLEGE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="school" value="school">SCHOOL &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="student" value="student">STUDENT &nbsp;
			  <input class="single-checkbox"type="checkbox" name="checkboxes"  id="minority" value="minority">MINORITY &nbsp;				 
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="financial-assistance" value="financial assistance">FINANCIAL ASSISTANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="scholarship" value="scholarship">SCHOLARSHIP &nbsp;
			  <input class="single-checkbox"type="checkbox" name="checkboxes"  id="prematric" value="prematric">PREMATRIC &nbsp;				 
			 <input class="single-checkbox"type="checkbox" name="checkboxes"  id="postmatric" value="postmatric">POSTMATRIC &nbsp;	
			  <input class="single-checkbox"type="checkbox" name="checkboxes"  id="disabled" value="disabled">DISABLED STUDENT &nbsp;			 
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="educational-assistance" value="educational assistance">EDUCATIONAL ASSISTANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="blind" value="blind">BLIND &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="deaf" value="deaf">DEAF &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="high-school" value="high school">HIGH SCHOOL &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="hs" value="higher secondary">HIGHER SECONDARY &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="ug" value="ug">UG &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="pg" value="pg">PG &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="degree" value="degree">DEGREE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="diploma" value="diploma">DIPLOMA &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="professional-course" value="professional course">PROFFESIONAL COURSE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="abroad" value="abroad">ABROAD &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="govt" value="govt">GOVT &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="aided" value="aided">AIDED &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="self" value="self">SELF FINANCING SCHOOL &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="sebc" value="sebc">SEBC &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="competitive-exam" value="competitive exam">COMPETITIVE EXAM &nbsp;
</div>
                        <div id="ifhealth" class="category-block" style="display: none;">
    select : <input class="single-checkbox"type="checkbox" name="checkboxes"  id="children" value="children">CHILDREN &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="orphan" value="orphan">ORPHAN &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="financial-assistance" value="financial assistance">FINANCIAL ASSISTANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="senior-citizen" value="senior citizen">SENIOR CITIZEN &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="mentally-challenged" value="mentally challenged">MENTALLY CHALLENGED &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="care-givers" value="care givers">CARE GIVERS &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="patient" value="patient">PATIENT &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="mother" value="mother">MOTHER &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="child" value="child">CHILD &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="pregnant" value="pregnant">PREGNANT &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="dental-treatment" value="dental treatment">DENTAL TREATMENT &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="medical-treatment" value="medical treatment">MEDICAL TREATMENT &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="handicapped" value="handicapped">HANDICAPPED &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="health-insurance" value="health insurance">HEALTH INSURANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="maternal-disability" value="maternal-disability">MATERNAL DISABILITY &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="unwed-mother" value="unwed-mother">UNWED MOTHER &nbsp;
</div>

<div id="ifsocialwelfare" class="category-block" style="display: none;">
    select : <input class="single-checkbox"type="checkbox" name="checkboxes"  id="destitute" value="destitute">DESTITUTE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="financial-assistance" value="financial assistance">FINANCIAL ASSISTANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="women" value="women">WOMEN &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="legal-aid" value="legal aid">LEGAL AID &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="loan" value="loan">LOAN &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="entrepreneur" value="entrepreneur">ENTREPRENEUR &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="self-employment" value="self employment">SELF EMPLOYMENT &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="self-help-group" value="self help group">SELF HELP GROUP &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="marriage-assistance" value="marriage assistance">MARRIAGE ASSISTANCE &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="srs" value="srs">SRS &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="housing" value="housing">HOUSING &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="house-renovation" value="house renovation">HOUSE RENOVATION &nbsp;
             <input class="single-checkbox"type="checkbox" name="checkboxes"  id="tribal" value="tribal">TRIBAL &nbsp;
</div>
                          <!-- Example HTML for checkbox group -->

<script>
  // Add event listener to each checkbox
  var checkboxes = document.querySelectorAll('input[type=checkbox]');
  checkboxes.forEach(function(checkbox) {
    checkbox.addEventListener('change', function() {
      checkLimit(checkboxes);
    });
  });
  
  // Function to check number of ticked checkboxes
  function checkLimit(checkboxes) {
    var checkedCount = 0;
    checkboxes.forEach(function(checkbox) {
      if (checkbox.checked) {
        checkedCount++;
      }
    });
    
    // Disable remaining unchecked checkboxes if limit is reached
    if (checkedCount == 5) {
      checkboxes.forEach(function(checkbox) {
        if (!checkbox.checked) {
          checkbox.disabled = true;
        }
      });
    } else {
      checkboxes.forEach(function(checkbox) {
        checkbox.disabled = false;
      });
    }
  }

</script>

                    </div>
                    <div class="col-12">
                      <input type="checkbox" value="yes" name="notifications">Receive notifications
                    </div></br>
                    {% if msg %}
                      <div class="alert alert-danger" role="alert">
                        {{ msg }}
                      </div>
                    {% endif %}
                    
                    <div class="col-12">
                      <button class="btn btn-primary w-100" id="submitBtn" type="submit" disabled>Create Account</button>
                    </div>
                    <div class="col-12">
                      <p class="small mb-0">Already have an account? <a href="{{url_for('login')}}">Log in</a></p>
                    </div>
                  </form>

                </div>
              </div>
            </div>
          </div>
        </div>

      </section>

    </div>
  </main><!-- End #main -->
  <!-- Vendor JS Files -->
  <script src="static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="static/js/main.js"></script>


</body>

</html>